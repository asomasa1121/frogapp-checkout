<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <script src="https://sandbox-cdn.paddle.com/paddle/v2/paddle.js"></script>
</head>
<body style="font-family: sans-serif; text-align: center; padding-top: 50px;">
    <h1>Processing Payment...</h1>
    <div id="status">Loading...</div>

    <script>
        // Use simplified initialization for Sandbox
        Paddle.Environment.set('sandbox'); // Set environment EXPLICITLY before init
        
        Paddle.Initialize({ 
            token: "test_3d7966c6a195ef6b87bede70f51" 
            // Removed 'environment' parameter from here as it caused the error
        });

        const urlParams = new URLSearchParams(window.location.search);
        const txnId = urlParams.get('_ptxn');

        if (txnId) {
            document.getElementById("status").innerText = "Opening secure checkout...";
            Paddle.Checkout.open({
                transactionId: txnId
            });
        } else {
            document.getElementById("status").innerText = "Error: No Transaction ID found.";
        }
    </script>
</body>
</html>
